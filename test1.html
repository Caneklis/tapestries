<!DOCTYPE html>
<html class="page" lang="ru">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Primary Meta Tags -->
    <title>Тканое великолепие - Спецпроект отдела реставрации</title>
    <meta name="description" content="Description index">
    <link rel="stylesheet" media="all" href="css/style.min.css" />
    <!-- BEGIN social data -->
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="">
    <meta property="og:title" content="">
    <meta property="og:description" content="">
    <meta property="og:image" content="">
    <!-- Twitter -->
    <meta property="twitter:card" content="">
    <meta property="twitter:url" content="">
    <meta property="twitter:title" content="">
    <meta property="twitter:description" content="">
    <meta property="twitter:image" content="">
    <!-- END social data -->
    <link rel="preload" href="fonts/playfair-display-v22-latin_cyrillic-regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
    <link rel="preload" href="fonts/playfair-display-v22-latin_cyrillic-regular.woff" as="font" type="font/woff" crossorigin="anonymous">
    <link rel="preload" href="fonts/montserrat-v15-latin_cyrillic-regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
    <link rel="preload" href="fonts/montserrat-v15-latin_cyrillic-regular.woff" as="font" type="font/woff" crossorigin="anonymous">
    <link rel="icon" href="favicon/favicon.ico"><!-- 32×32 -->
    <link rel="apple-touch-icon" href="favicon/apple-touch-icon.png"><!-- 180×180 -->
    <link rel="manifest" href="favicon/manifest.webmanifest">
  </head>
  <!--  -->
  <body class="page__body">
    <!--  -->
    <header class="header">
      <nav class="header__wrapper  main-nav">
        <div class="logo"><a class="logo__link" href="#"><img src="images/gmii-logo.svg" width="200" alt=""></a></div>
        <h1 class="header__title"><a href="index.html">Тканое великолепие</a></h1>
        <div class="header__user-block">
          <div class="volume">
            <button class="volume__button" type="button">
              <svg class="volume__button-icon" aria-hidden="true" width="30" height="30">
                <use class="volume__button-icon-play" href="images/sprite_auto.svg#icon-volume"></use>
                <use class="volume__button-icon-mute" href="images/sprite_auto.svg#icon-mute"></use>
              </svg>
            </button>
          </div>
          <div class="lang">
            <a href="#" class="lang__link">EN</a>
          </div>
          <button class="main-nav__button" type="button" aria-expanded="false" aria-controls="main-nav__list">
            <svg class="main-nav__icon" aria-hidden="true" width="50" height="50">
              <use class="main-nav__icon-menu" href="images/sprite_auto.svg#menu"></use>
              <use class="main-nav__icon-cross" href="images/sprite_auto.svg#cross"></use>
            </svg>
          </button>
        </div>
        <ul class="main-nav__list" id="main-nav__list">
          <li class="main-nav__item"><a href="index.html">На главную</a></li>
          <li class="main-nav__item"><a href="#">История шпалерного ткачества</a></li>
          <li class="main-nav__item  main-nav__item--with-dropdown">
            <a href="#"> &laquo;Триумф Славы&raquo; <svg class="main-nav__sublist-icon" aria-hidden="true" width="10" height="10">
                <use href="images/sprite_auto.svg#arrow-down"></use>
              </svg>
            </a>
            <ul class="main-nav__sublist">
              <li class="main-nav__sublist-nav__item"><a href="about.html">О шпалере</a></li>
              <li class="main-nav__sublist-nav__item"><a href="deepzoom.html">Серия шпалер «Триумфы Петрарки»</a></li>
              <li class="main-nav__sublist-nav__item"><a href="#">Исследование и реставрация </a></li>
              <li class="main-nav__sublist-nav__item"><a href="#">Одежды и мода</a></li>
              <li class="main-nav__sublist-nav__item"><a href="#">Растения и птицы</a></li>
            </ul>
          </li>
          <li class="main-nav__item  main-nav__item--with-dropdown">
            <a href="#"> &laquo;Триумф Надежды&raquo; <svg class="main-nav__sublist-icon" aria-hidden="true" width="10" height="10">
                <use href="images/sprite_auto.svg#arrow-down"></use>
              </svg>
            </a>
            <ul class="main-nav__sublist">
              <li class="main-nav__sublist-nav__item"><a href="#">О шпалере</a></li>
              <li class="main-nav__sublist-nav__item"><a href="#">Серия шпалер «Триумф семи Добродетелей»</a></li>
              <li class="main-nav__sublist-nav__item"><a href="#">Исследование и реставрация </a></li>
              <li class="main-nav__sublist-nav__item"><a href="#">История костюма</a></li>
              <li class="main-nav__sublist-nav__item"><a href="#">Растения и птицы</a></li>
            </ul>
          </li>
          <li class="main-nav__item  main-nav__item--with-dropdown">
            <a href="#"> &laquo;Иоанн Креститель&raquo; <svg class="main-nav__sublist-icon" aria-hidden="true" width="10" height="10">
                <use href="images/sprite_auto.svg#arrow-down"></use>
              </svg>
            </a>
            <ul class="main-nav__sublist">
              <li class="main-nav__sublist-nav__item"><a href="#">О шпалере</a></li>
              <li class="main-nav__sublist-nav__item"><a href="#">Исследование и реставрация</a></li>
              <li class="main-nav__sublist-nav__item"><a href="#">Растения и птицы</a></li>
              <li class="main-nav__sublist-nav__item"><a href="#">Приемы шпалерного ткачества </a></li>
            </ul>
          </li>
          <li class="main-nav__item  main-nav__item--with-dropdown">
            <a href="#"> &laquo;Встреча Исава и Иакова&raquo; <svg class="main-nav__sublist-icon" aria-hidden="true" width="10" height="10">
                <use href="images/sprite_auto.svg#arrow-down"></use>
              </svg>
            </a>
            <ul class="main-nav__sublist">
              <li class="main-nav__sublist-nav__item"><a href="#">О шпалере</a></li>
              <li class="main-nav__sublist-nav__item"><a href="#">Серия шпалер «История Иакова»</a></li>
              <li class="main-nav__sublist-nav__item"><a href="#">Исследование и реставрация</a></li>
              <li class="main-nav__sublist-nav__item"><a href="#">Растения и птицы</a></li>
              <li class="main-nav__sublist-nav__item"><a href="#">История костюма </a></li>
              <li class="main-nav__sublist-nav__item"><a href="#">Компьютерная реконструкция</a></li>
            </ul>
          </li>
          <li class="main-nav__item  main-nav__item--with-dropdown">
            <a href="#"> &laquo;Триумф Помпея&raquo; <svg class="main-nav__sublist-icon" aria-hidden="true" width="10" height="10">
                <use href="images/sprite_auto.svg#arrow-down"></use>
              </svg>
            </a>
            <ul class="main-nav__sublist">
              <li class="main-nav__sublist-nav__item"><a href="#">О шпалере</a></li>
              <li class="main-nav__sublist-nav__item"><a href="#">Серия шпалер «История Помпея Великого»</a></li>
              <li class="main-nav__sublist-nav__item"><a href="#">Исследование и реставрация</a></li>
              <li class="main-nav__sublist-nav__item"><a href="#">Растения и птицы</a></li>
              <li class="main-nav__sublist-nav__item"><a href="#">История костюма </a></li>
            </ul>
          </li>
          <li class="main-nav__item  main-nav__item--with-dropdown">
            <a href="#"> &laquo;Дети Венеры&raquo; <svg class="main-nav__sublist-icon" aria-hidden="true" width="10" height="10">
                <use href="images/sprite_auto.svg#arrow-down"></use>
              </svg>
            </a>
            <ul class="main-nav__sublist">
              <li class="main-nav__sublist-nav__item"><a href="#">О шпалере</a></li>
              <li class="main-nav__sublist-nav__item"><a href="#">Шпалеры «Дети Венеры»</a></li>
              <li class="main-nav__sublist-nav__item"><a href="#">Исследование и реставрация</a></li>
              <li class="main-nav__sublist-nav__item"><a href="#">Растения и птицы</a></li>
              <li class="main-nav__sublist-nav__item"><a href="#">История костюма</a></li>
              <li class="main-nav__sublist-nav__item"><a href="#">Тема «детей Венеры» в разных видах искусств</a></li>
            </ul>
          </li>
          <li class="main-nav__item"><a href="glossary.html">Глоссарий</a></li>
          <li class="main-nav__item"><a href="contributors.html">Над проектом работали</a></li>
          <li class="main-nav__item"><a href="#">Партнеры и участники проекта</a></li>
          <li class="main-nav__item"><a href="#">Квесты и квизы</a></li>
          <li class="main-nav__item"><a href="#">Шпалеры в Москве и МО</a></li>
          <li class="main-nav__contacts">
            <ul class="social">
              <li class="social__item">
                <a class="social__link" href="#" aria-label="Страница на фейсбуке">
                  <svg class="main-nav__sublist-icon" aria-hidden="true" width="60" height="60">
                    <use href="images/sprite_auto.svg#fb-icon"></use>
                  </svg>
                </a>
              </li>
              <li class="social__item">
                <a class="social__link" href="#" aria-label="Канал на ютубе">
                  <svg class="main-nav__sublist-icon" aria-hidden="true" width="60" height="60">
                    <use href="images/sprite_auto.svg#yt-icon"></use>
                  </svg>
                </a>
              </li>
            </ul>
            <p><a href="#">Назад на сайт Отдела реставрации</a></p>
          </li>
        </ul>
      </nav>
    </header>
    <!-- BEGIN content -->
    <div class="wrapper">
      <main class="main">
        <div class="quiz__head">
          <div class="head__content" id="head">Lorem ipsum dolor sit amet consectetur adipisicing elit. Ut ducimus odit accusamus, illum quas magni provident odio praesentium commodi sint, porro harum, minus cupiditate architecto culpa aut ex dolore officia.</div>
        </div>
        <div class="quiz__body">
          <div class="buttons">
            <div class="buttons__content" id="buttons">
              <button class="button">Default button</button><br>
              <button class="button button_wrong">Wrong answer</button><br>
              <button class="button button_correct">Correct answer</button><br>
              <button class="button button_passive">Unclicked button</button><br>
            </div>
          </div>
          <div class="quiz__footer">
            <div class="footer__content" id="pages">0 / 0</div>
          </div>
        </div>
      </main>
    </div>
    <style>
      body,
      html
      {
        width: 100%;
        height: 100%;
        margin: 0;
        padding: 0;
        overflow: hidden;
        font-size: 16px;
        font-family: helvetica, arial;
        background: #f9f9f9;
        color: #111;
      }

      .wrapper
      {
        width: 100%;
        height: 100%;
        display: table;
      }

      .main
      {
        display: table-cell;
        vertical-align: middle;
        text-align: center;
      }

      .quiz-frame
      {
        border: 0;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
      }

      .quiz__head
      {
        font-size: 20pt;
        margin: 10px;
        margin-bottom: 50px;
      }

      .head__content
      {
        padding: 5px;
      }

      .quiz__body
      {
        margin: 10px;
      }

      .quiz__footer
      {
        position: absolute;
        bottom: 0;
        display: block;
        width: 100%;
      }

      .footer__content
      {
        padding: 5px;
      }

      .button
      {
        border: 0;
        border-radius: 10px;
        background: #6477EB;
        color: #fff;
        padding: 10px 25px;
        width: 70%;
        font-size: 15pt;
        display: block;
        margin: 2px auto;
        cursor: pointer;
      }

      .button_wrong
      {
        background: #EB6465;
      }

      .button_correct
      {
        background: #5EB97D;
      }

      .button_passive
      {
        background: #B3B3B3;
      }

    </style>
    <script>
      //Класс, который представляет сам тест
      class Quiz
      {
        constructor(type, questions, results)
        {
          //Тип теста: 1 - классический тест с правильными ответами, 2 - тест без правильных ответов
          this.type = type;
          //Массив с вопросами
          this.questions = questions;
          //Массив с возможными результатами
          this.results = results;
          //Количество набранных очков
          this.score = 0;
          //Номер результата из массива
          this.result = 0;
          //Номер текущего вопроса
          this.current = 0;
        }
        Click(index)
        {
          //Добавляем очки
          let value = this.questions[this.current].Click(index);
          this.score += value;
          let correct = -1;
          //Если было добавлено хотя бы одно очко, то считаем, что ответ верный
          if (value >= 1)
          {
            correct = index;
          }
          else
          {
            //Иначе ищем, какой ответ может быть правильным
            for (let i = 0; i < this.questions[this.current].answers.length; i++)
            {
              if (this.questions[this.current].answers[i].value >= 1)
              {
                correct = i;
                break;
              }
            }
          }
          this.Next();
          return correct;
        }
        //Переход к следующему вопросу
        Next()
        {
          this.current++;
          if (this.current >= this.questions.length)
          {
            this.End();
          }
        }
        //Если вопросы кончились, этот метод проверит, какой результат получил пользователь
        End()
        {
          for (let i = 0; i < this.results.length; i++)
          {
            if (this.results[i].Check(this.score))
            {
              this.result = i;
            }
          }
        }
      }
      //Класс, представляющий вопрос
      class Question
      {
        constructor(text, answers)
        {
          this.text = text;
          this.answers = answers;
        }
        Click(index)
        {
          return this.answers[index].value;
        }
      }
      //Класс, представляющий ответ
      class Answer
      {
        constructor(text, value)
        {
          this.text = text;
          this.value = value;
        }
      }
      //Класс, представляющий результат
      class Result
      {
        constructor(text, value)
        {
          this.text = text;
          this.value = value;
        }
        //Этот метод проверяет, достаточно ли очков набрал пользователь
        Check(value)
        {
          if (this.value <= value)
          {
            return true;
          }
          else
          {
            return false;
          }
        }
      }
      //Массив с результатами
      const results = [
        new Result("Вам многому нужно научиться", 0),
        new Result("Вы уже неплохо разбираетесь", 2),
        new Result("Ваш уровень выше среднего", 4),
        new Result("Вы в совершенстве знаете тему", 6)
      ];
      //Массив с вопросами
      const questions = [
        new Question("2 + 2 = ",
          [
            new Answer("2", 0),
            new Answer("3", 0),
            new Answer("4", 1),
            new Answer("0", 0)
          ])
      ];
      //Сам тест
      const quiz = new Quiz(1, questions, results);
      Update();
      //Обновление теста
      function Update()
      {
        //Проверяем, есть ли ещё вопросы
        if (quiz.current < quiz.questions.length)
        {
          //Если есть, меняем вопрос в заголовке
          headElem.innerHTML = quiz.questions[quiz.current].text;
          //Удаляем старые варианты ответов
          buttonsElem.innerHTML = "";
          //Создаём кнопки для новых вариантов ответов
          for (let i = 0; i < quiz.questions[quiz.current].answers.length; i++)
          {
            let btn = document.createElement("button");
            btn.className = "button";
            btn.innerHTML = quiz.questions[quiz.current].answers[i].text;
            btn.setAttribute("index", i);
            buttonsElem.appendChild(btn);
          }
          //Выводим номер текущего вопроса
          pagesElem.innerHTML = (quiz.current + 1) + " / " + quiz.questions.length;
          //Вызываем функцию, которая прикрепит события к новым кнопкам
          Init();
        }
        else
        {
          //Если это конец, то выводим результат
          buttonsElem.innerHTML = "";
          headElem.innerHTML = quiz.results[quiz.result].text;
          pagesElem.innerHTML = "Очки: " + quiz.score;
        }
      }

      function Init()
      {
        //Находим все кнопки
        let btns = document.getElementsByClassName("button");
        for (let i = 0; i < btns.length; i++)
        {
          //Прикрепляем событие для каждой отдельной кнопки
          //При нажатии на кнопку будет вызываться функция Click()
          btns[i].addEventListener("click", function(e)
          {
            Click(e.target.getAttribute("index"));
          });
        }
      }

      function Click(index)
      {
        //Получаем номер правильного ответа
        let correct = quiz.Click(index);
        //Находим все кнопки
        let btns = document.getElementsByClassName("button");
        //Делаем кнопки серыми
        for (let i = 0; i < btns.length; i++)
        {
          btns[i].className = "button button_passive";
        }
        //Если это тест с правильными ответами, то мы подсвечиваем правильный ответ зелёным, а неправильный - красным
        if (quiz.type == 1)
        {
          if (correct >= 0)
          {
            btns[correct].className = "button button_correct";
          }
          if (index != correct)
          {
            btns[index].className = "button button_wrong";
          }
        }
        else
        {
          //Иначе просто подсвечиваем зелёным ответ пользователя
          btns[index].className = "button button_correct";
        }
        //Ждём секунду и обновляем тест
        setTimeout(Update, 1000);
      }

    </script>
    <!-- END content -->
    <div class="tooltip-content">
    </div>
    <!-- BEGIN scripts -->
    <script>
      const tooltipData = [
      {
        id: 1,
        txt: `
						<div class="tooptip-content__text">
							<p>Шпале́ра (польск. szраlerа, нем. Spalier от итал. spalliera, из spalla «опора, плечо»):
							<ul>
								<li>
									<p>Шпалера (садоводство) — решётка, служащая опорой для растений. Шпалера (ковёр) — безворсовый тканый
										настенный ковёр с сюжетными и орнаментальными композициями. </p>
								<li>
									<p>Шпалера (военное дело) — шеренга войск по сторонам пути следования кого-нибудь.</p>
								</li>
							</ul>
						</div>
						<div class="tooltip-content__image">
							<img src="images/tooltip-thumb.jpg" alt="">
						</div>
					`,
      },
      {
        id: 2,
        txt: `
						<div class="tooptip-content__text">
							<p>Вторая половина XV века
							<ul>
								<li>
									<p>Византийская империя (395—1453) прекратила существование после падения Константинополя (1453).</p>
								<li>
									<p>Тринадцатилетняя война (1454—1466). Польша покоряет Тевтонский орден и получает выход к Балтийскому морю.</p>
								</li>
								<li>
									<p>Война Алой и Белой розы (1455—1487). Начало династии Тюдоров.</p>
								</li>
							</ul>
						</div>
					`,
      },
      {
        id: 3,
        txt: `
						<div class="tooltip-content__image">
							<img src="images/tooltip-thumb.jpg" alt="">
						</div>
					`,
      }, ];

    </script>
    <script src="js/main.min.js"></script>
    <script>
      let twenty = () =>
      {
        setTimeout(() =>
        {
          $(".before-after").twentytwenty();
        }, 1000);
      }
      if (document.querySelector("#ssb-banner"))
      {
        var map = (function(me, $)
        {
          "use strict";
          me.name = 'map';
          var viewer, pad, $window, $ssb, $info, $controls;
          pad = 1000;
          viewer = new OpenSeadragon.Viewer(
          {
            id: "ssb-banner",
            tileSources: "tiles/tapestry-1.dzi",
            minZoomImageRatio: 1.0,
            maxZoomPixelRatio: 1.0,
            animationTime: 3,
            minZoomLevel: 2,
            maxZoomLevel: 6,
            zoomPerClick: 1.0,
            prefixUrl: "",
            immediateRender: true,
            showNavigationControl: false,
            showNavigator: true,
            navigatorAutoFade: false,
            navigatorPosition: "BOTTOM_RIGHT",
          });
          $window = $(window);
          $ssb = $(".ssb");
          $info = $(".ssb__info", $ssb);
          $controls = $(".ssb__controls", $ssb);
          $info.find(".ssb__info-inner").toggleClass("scroll", !!("ontouchstart" in window));
          var zoomIn = function()
          {
            viewer.viewport.zoomBy(2.5).applyConstraints();
            //viewer.viewport.zoomBy(1.5).applyConstraints();
          };
          var zoomOut = function()
          {
            viewer.viewport.zoomBy(1 / 1.5).applyConstraints();
          };
          var reset = function()
          {
            viewer.viewport.goHome();
          };
          var toggleHotspots = function()
          {
            var $hotspots = $(".ssb-hotspot", $ssb),
              $hotspotsToggleButton = $(this);
            $hotspots.toggleClass("is-hidden");
            if ($hotspots.is(".is-hidden"))
            {
              $hotspotsToggleButton.addClass("icon-show-hotspots").removeClass("icon-hide-hotspots").attr("title", "Включить метки");
            }
            else
            {
              $hotspotsToggleButton.addClass("icon-hide-hotspots").removeClass("icon-show-hotspots").attr("title", "Выключить метки");
            }
          };
          var toggleControls = function()
          {
            var $controlsToggleButton = $(".ssb__controls-toggle", $controls);
            $controls.toggleClass("is-expanded");
            if ($controls.is(".is-expanded"))
            {
              $controlsToggleButton.addClass("ssb__controls-toggle--open").removeClass("ssb__controls-toggle--close").attr("title", "Close Tools");
            }
            else
            {
              $controlsToggleButton.addClass("ssb__controls-toggle--close").removeClass("ssb__controls-toggle--open").attr("title", "Открыть панель управления");
            }
          };
          var reorient = function(e)
          {
            if ($window.width() <= 600)
            {
              toggleInfo();
            }
            return false;
          };
          var toggleInfo = function(event)
          {
            if (event) event.stopPropagation();
            var $infoToggleButton = $(".ssb__info-toggle-button", $info);
            $ssb.toggleClass("ssb__info-expanded");
            if ($ssb.is(".ssb__info-expanded"))
            {
              $infoToggleButton.addClass("ssb__info-toggle-button--close").removeClass("ssb__info-toggle-button--open").attr("title", "Открыть панель");
            }
            else
            {
              $infoToggleButton.addClass("ssb__info-toggle-button--open").removeClass("ssb__info-toggle-button--close").attr("title", "Закрыть панель");
            }
            return false;
          };
          var showInfo = function()
          {
            $(".ssb__welcome", $info).hide();
            $(".ssb__info-container").show();
          };
          var showWelcome = function()
          {
            $(".ssb__info-container").hide();
            $(".volume__button").removeClass("volume__button--play");
            $("audio")[0].pause();
            var $welcome = $(".ssb__welcome");
            if (!$welcome.is(":visible") && $ssb.is(".ssb__info-expanded"))
            {
              $welcome.show();
            }
            else
            {
              $welcome.show();
              toggleInfo();
            }
          };
          var activateHotspot = function(e)
          {
            var $hotspot = $(this),
              $hotspotImg = $info.find(".ssb__info-img"),
              $hotspotMainTitle = $info.find(".ssb__info-main-title"),
              $hotspotTitle = $info.find(".ssb__info-title"),
              $hotspotDescription = $info.find(".ssb__info-description"),
              $hotspotLink = $info.find(".ssb__info-link"),
              $hotspotAudio = $info.find(".ssb__info-audio");
            $hotspotImg.attr("src", "data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==").hide();
            $hotspotMainTitle.hide();
            $hotspotTitle.hide();
            $hotspotDescription.hide();
            $hotspotLink.hide();
            $hotspotAudio.attr("src", "").hide();
            $hotspot.addClass("is-active is-viewed").siblings().removeClass("is-active");
            $(".volume__button").removeClass("volume__button--play");
            showInfo();
            $hotspotImg.attr("src", $hotspot.data("image")).show();
            $hotspotMainTitle.html($hotspot.data("category")).show();
            $hotspotTitle.html($hotspot.data("title")).show();
            $hotspotDescription.html($hotspot.data("description")).show();
            $hotspotLink.attr("href", $hotspot.data("link")).show();
            $hotspotAudio.attr("src", $hotspot.data("audio")).show();
            $(".ssb-hotspot").on("click", function()
            {
              $(".ssb__info-inner").scrollTop(0);
            });
            viewer.viewport.fitBounds($hotspot.data("zoomTo"));
            setTimeout(function()
            {
              if (!$ssb.is(".ssb__info-expanded")) toggleInfo();
            }, 2000);
            twenty();
            $(".ssb__gallery-popup-link").magnificPopup(
            {
              type: "image",
              //delegate: "a",
              gallery:
              {
                tCounter: '<span class="mfp-counter">%curr% / %total%</span>', // markup of counter
                enabled: true,
                tPrev: 'Предыдущее изображение', // Alt text on left arrow
                tNext: 'Следущее изображение', // Alt text on right arrow
                arrowMarkup: '<button title="%title%" type="button" class="mfp-arrow mfp-arrow-%dir%"></button>', // markup of an arrow button
              },
              image:
              {
                titleSrc: 'data-caption'
              },
            });
            return false;
          };
          viewer.addHandler("open", function()
          {
            var aspectRatio = viewer.source.width / viewer.source.height;
            $info.on("click", "a:not(.ssb__gallery-popup-link)", function()
            {
              window.open(this.href);
              return false;
            });
            $info.on("click", reorient);
            $(".ssb__touch-to-begin", $ssb).on("click", toggleInfo);
            $(".ssb__controls-zoom-in", $controls).on("click", zoomIn);
            $(".ssb__controls-zoom-out", $controls).on("click", zoomOut);
            $(".ssb__controls-reset", $controls).on("click", reset);
            $(".ssb__controls-toggle-hotspots", $controls).on("click", toggleHotspots);
            $(".ssb__controls-toggle", $controls).on("click", toggleControls);
            $(".ssb__controls-toggle-info", $controls).on("click", showWelcome);
            $(".ssb__info-toggle-button", $info).on("click", toggleInfo);
            // Setup the hotspots...
            $.each(me.hotspots, function(index, hotspot)
            {
              var $hotspot = $("<a/>").addClass("ssb-hotspot"),
                x = hotspot.x,
                y = hotspot.y,
                w = hotspot.w, //выводит размеры из hotspots
                h = hotspot.h, //выводит размеры из hotspots
                center = new OpenSeadragon.Point(
                  (x + w / 2) / viewer.source.width,
                  (y + h / 2) / viewer.source.height / aspectRatio),
                rect = new OpenSeadragon.Rect(x / viewer.source.width, y / viewer.source.height / aspectRatio, w / viewer.source.width, h / viewer.source.height / aspectRatio),
                zoomTo = new OpenSeadragon.Rect(
                  (x - pad / 2) / viewer.source.width,
                  (y - pad / 2) / viewer.source.height / aspectRatio,
                  (w + pad) / viewer.source.width,
                  (h + pad) / viewer.source.height / aspectRatio),
                hotspotPlacement = OpenSeadragon.OverlayPlacement.TOP_LEFT;
              $hotspot.attr(
              {
                // title: hotspot.title,
                // text: hotspot.description,
                class: `ssb-hotspot  ${hotspot.data}`,
                href: hotspot.link,
                id: hotspot.id,
              });
              $hotspot.data(
              {
                index: index,
                zoomTo: zoomTo,
                image: hotspot.image,
                category: hotspot.category,
                title: hotspot.title,
                description: hotspot.description,
                link: hotspot.link,
                audio: hotspot.audio
              });
              $hotspot.on("click touchend", activateHotspot);
              viewer.drawer.addOverlay($hotspot[0], rect, hotspotPlacement);
            });
          });
          return me;
        })(map ||
        {}, jQuery);
      }

    </script>
    <!-- END scripts -->
  </body>
</html>
